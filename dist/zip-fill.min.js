/**
 * ZipFill v1.0.0 - US Address Autocomplete from Zip Codes
 * https://github.com/zip-fill/zip-fill
 * MIT License
 */
!function(g){"use strict";class ZipFill{constructor(e){this.data=e,this.loaded=!1,this.loadPromise=null}async load(e){if(this.loaded)return this;if(this.loadPromise)return this.loadPromise;return this.loadPromise=(async()=>{if(this.data)return this.loaded=!0,this;const t=e||"https://unpkg.com/zip-fill@latest/dist/zip-data.min.json";try{const r=await fetch(t);if(!r.ok)throw new Error("Failed: "+r.status);this.data=await r.json(),this.loaded=!0}catch(n){throw console.error("ZipFill: Failed to load",n),n}return this})(),this.loadPromise}lookup(e){if(!this.loaded||!this.data)return console.warn("ZipFill: Call load() first"),null;const t=String(e).trim().padStart(5,"0").slice(0,5);if(!/^\d{5}$/.test(t))return null;const r=this.data[t];return r?{zip:t,locations:Array.isArray(r)?r:[r],hasMultiple:Array.isArray(r)&&r.length>1}:null}bind(e){const{zipInput:t,cityInput:i,stateInput:s,countyInput:c,citySelect:o,onLookup:a,onMultiple:l,onNotFound:u}=e,n="string"==typeof t?document.querySelector(t):t,p="string"==typeof i?document.querySelector(i):i,d="string"==typeof s?document.querySelector(s):s,f=c?"string"==typeof c?document.querySelector(c):c:null,h=o?"string"==typeof o?document.querySelector(o):o:null;if(!n)return void console.error("ZipFill: zipInput not found");const m=()=>{const e=n.value.trim();if(5!==e.length)return void(h&&(h.style.display="none"));const t=this.lookup(e);if(a&&a(t),!t)return void(u&&u(e));const{locations:r,hasMultiple:i}=t;i?h?(this._populateSelect(h,r,p,d,f),h.style.display="",p&&(p.style.display="none")):l?l(r):this._fillFields(r[0],p,d,f):(h&&(h.style.display="none",p&&(p.style.display="")),this._fillFields(r[0],p,d,f))};return n.addEventListener("input",m),n.addEventListener("change",m),()=>{n.removeEventListener("input",m),n.removeEventListener("change",m)}}_fillFields(e,t,i,s){t&&(t.value=e.city,t.dispatchEvent(new Event("input",{bubbles:!0}))),i&&("SELECT"===i.tagName?Array.from(i.options).find(t=>t.value===e.state||t.text===e.state)&&(i.value=e.state):i.value=e.state,i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0}))),s&&(s.value=e.county,s.dispatchEvent(new Event("input",{bubbles:!0})))}_populateSelect(e,t,i,s,c){e.innerHTML='<option value="">Select city...</option>',t.forEach((t,i)=>{const s=document.createElement("option");s.value=i,s.textContent=t.city+", "+t.state,e.appendChild(s)}),e.onchange=()=>{const n=parseInt(e.value,10);isNaN(n)||!t[n]||(this._fillFields(t[n],null,s,c),i&&(i.value=t[n].city))}}}const instance=new ZipFill;g.ZipFill=ZipFill,g.zipFill=instance,"undefined"!=typeof module&&module.exports&&(module.exports=ZipFill,module.exports.default=ZipFill,module.exports.instance=instance)}(typeof window!=="undefined"?window:this);
